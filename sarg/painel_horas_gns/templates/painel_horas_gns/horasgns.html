{% load iconSucess %}
<!DOCTYPE html>
<html lang="pt-br">
   <head>
      {% include "sarg/include/header.html" %}
      <title>Controle E-Ponto | SARG | Sistema de Analise e Relatorios de Gestao</title>
      <style>
         #datatable-responsive tbody tr td{
         vertical-align: middle !important;
         }
      </style>
   </head>
   
   <body class="nav-md">
      <div class="container body">
         <div class="main_container">
            {% include "sarg/include/left.html" %}
         </div>
      </div>
	  
      <!-- top navigation -->
      {% include "sarg/include/top_navegation.html" %} 
      <!-- /top navigation -->
      <!-- page content -->
      <div class="right_col" role="main">
         <!-- top tiles -->
         <div class="row">
            <div class="col-xs-12 col-sm-6">
               <h1>Resumo de Horas GNS</h1>
            </div>
            <div class="col-xs-12 col-sm-6" style="text-align: right;">
               <h6>Ultima atualizacao: {{data}}hrs</h6>
               <h6>Fonte: e-Ponto</h6>
            </div>
         </div>
         <!-- /top tiles -->	 
         <div class="col-md-13 col-sm-13 col-xs-13">
            <div class="x_panel">
               <div class="x_title">
                  <ul class="nav navbar-right panel_toolbox">
                     <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                     </li>
                     <li><a class="close-link"><i class="fa fa-close"></i></a>
                     </li>
                  </ul>
                  <div class="clearfix"></div>
               </div>
               <div class="x_content">
                  <!-- start project list -->
                  <div class="col-lg-12 col-xs-12 corpo">
                     <div class="x_panel tile caixas_orcamentos dark">
                        <i class="fa fa-clock-o icones_fundo"></i>
                        <div class="x_title">
                           <ul class="nav navbar-right panel_toolbox">
                           </ul>
                           <div class="icon" style="text-align: center">
                              <h1>Resumo de Horas GNS</h1>
                           </div>
                           <div class="clearfix"></div>
                        </div>
						
                        <div class="x_content">
                           <form action="" method="post" class="form-inline col-xs-9" >
                              {% csrf_token %}
                              <div style="padding-left: 0 !important;" class="form-group col-xs-4">
                                 <label class="">Filtro:</label>
                                 <select NAME="periodo" class="form-control">
                                    {% for per in periodos %}
                                    {% if vPeriodo == per.periodo %}
                                    <option value="{{ per.periodo }}" selected>{{ per.periodo }}</option>
                                    {% else %}
                                    <option value="{{ per.periodo }}">{{ per.periodo }}</option>
                                    {% endif %}
                                    {% endfor %}               
                                 </select>
                              </div>
                              <button type="submit" class="btn btn-primary">Filtrar</button>
                           </form>
						   
                           <div class="row top_tiles caixa_valores">
                              <div class="animated flipInY col-sm-12 col-xs-12">
                                 <div class="tile-stats caixas_valores centraliza_textos">
                                    <div class="count">Total de Horas</div>
                                    <div class="count" style="color: rgb(26,187,156)">{{ totalHoras|floatformat:0 }}</div>
                                 </div>
                              </div>

							{% for i in ResumoHorasGns %}
                              <div class="animated flipInY col-sm-3 col-xs-12">
                                 <div class="tile-stats caixas_valores centraliza_textos">
                                    <div class="count">{{i.descricao}}<span style="text-transform: initial !important"></span>
                                       <div class="count" style="color: rgb(26,187,156)">{{ i.qtd_horas|floatformat:0 }}</div>
                                    </div>
                                 </div>
                              </div>
							{% endfor %}
							
<!--
							  
							  <div class="animated flipInY col-sm-3 col-xs-12">
                                 <div class="tile-stats caixas_valores centraliza_textos">
                                    <div class="count">Interno<span style="text-transform: initial !important">
							  {% for value in resumoHorasGnsInterno %}</span>
                                       <div style="font-size:25px;">{{ value.descricao }}</div>
                                       <div style="color: rgb(26,187,156)">{{ value.qtd_horas|floatformat:0 }}</div>
                              {% endfor %}
                                       <div class="count"><span style="text-transform: initial !important">{{ value.descricao }}</span></div>
                                       <div class="count" style="color: rgb(26,187,156)">{{ value.qtd_horas|floatformat:0 }}</div>
									   
									   <div class="count"><span style="text-transform: initial !important">{{ value.descricao }}</span></div>
                                       <div class="count" style="color: rgb(26,187,156)">{{ value.qtd_horas|floatformat:0 }}</div>
									   
									   <div class="count"><span style="text-transform: initial !important">{{ value.descricao }}</span></div>
                                       <div class="count" style="color: rgb(26,187,156)">{{ value.qtd_horas|floatformat:0 }}</div>
                                    </div>
                                 </div>
                              </div>
							  
                              {% for value in resumoHorasGns %}
                              <div class="animated flipInY col-sm-3 col-xs-12">
                                 <div class="tile-stats caixas_valores centraliza_textos">
                                    <div class="count"><span style="text-transform: initial !important">{{ value.descricao }}</span></div>
                                    <div class="count" style="color: rgb(26,187,156)">{{ value.qtd_horas|floatformat:0 }}</div>
                                 </div>
                              </div>
                              {% endfor %}
							  
                              <div class="animated flipInY col-sm-3 col-xs-12">
                                 <div class="tile-stats caixas_valores centraliza_textos">
                                    <div class="count">Produção<span style="text-transform: initial !important">
							  {% for value in resumoHorasGnsProducao %}</span>
                                       <div style="font-size:25px;">{{ value.descricao }}</div>
                                       <div style="color: rgb(26,187,156)">{{ value.qtd_horas|floatformat:0 }}</div>
                              {% endfor %}
                                       <div class="count"><span style="text-transform: initial !important">{{ value.descricao }}</span></div>
                                       <div class="count" style="color: rgb(26,187,156)">{{ value.qtd_horas|floatformat:0 }}</div>
                                    </div>
                                 </div>
                              </div>
							  
						-->
							  
                           </div>
						   
                        </div>
                     </div>
                  </div>
               </div>

               <!-- end project list -->
            </div>
         </div>
		 
		 
		 
		 
		 
		 
		 
		 
		 
		 
         <div class="col-md-13 col-sm-13 col-xs-13">
            <div class="x_panel">
               <div class="x_title">
                  <ul class="nav navbar-right panel_toolbox">
                     <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                     </li>
                     <li><a class="close-link"><i class="fa fa-close"></i></a>
                     </li>
                  </ul>
                  <div class="clearfix"></div>
               </div>
               <div class="x_content">
                  <!-- start project list -->
                  <div class="col-lg-12 col-xs-12 corpo">
                     <div class="x_panel tile caixas_orcamentos dark">
                        <i class="fa fa-clock-o icones_fundo"></i>
                        <div class="x_title">
                           <ul class="nav navbar-right panel_toolbox">
                           </ul>
                           <div class="icon" style="text-align: center">
                              <h1>Detalhamento de Horas GNS por Serviço</h1>
                           </div>
                           <div class="clearfix"></div>
                        </div>
						
                        <div class="x_content">
							<form action="" method="post"  >
							 {% csrf_token %}
							  
							 <div style="padding-left: 0 !important;" class="form-group col-xs-4">
                                 <label class="">Cliente:</label>
                                 <select NAME="cliente" class="form-control" >
                                    {% for cli in Clientes %}
                                    {% if vCliente == cli.cliente %}
                                    <option value="{{ cli.cliente }}" selected>{{ cli.cliente }}</option>
                                    {% else %}
                                    <option value="{{ cli.cliente }}">{{ cli.cliente }}</option>
                                    {% endif %}
                                    {% endfor %}               
                                 </select>
                              </div>
                              <div style="padding-left: 0 !important;" class="form-group col-xs-4">
                                 <label class="">Serviço:</label>
                                 <select NAME="servico" class="form-control">
                                    {% for serv in Servicos %}
                                    {% if vServico == serv.des_item_contabil %}
                                    <option value="{{ serv.des_item_contabil }}" selected>{{ serv.des_item_contabil  }}</option>
                                    {% else %}
                                    <option value="{{ serv.des_item_contabil }}">{{ serv.des_item_contabil  }}</option>
                                    {% endif %}
                                    {% endfor %}               
                                 </select>
                              </div>
							  
 <!--                             <div style="padding-left: 0 !important;" class="form-group col-xs-4">
                                 <label class="">Tipo Rateio:</label>
                                 <select NAME="descricao" class="form-control">
                                    {% for desc in Descricoes %}
                                    {% if vDescricao == desc.descricao %}
                                    <option value="{{ desc.descricao }}" selected>{{ desc.descricao }}</option>
                                    {% else %}
                                    <option value="{{ desc.descricao }}">{{ desc.descricao }}</option>
                                    {% endif %}
                                    {% endfor %}               
                                 </select>
                              </div>	 -->						  
							  
							  
                              <button type="submit" class="btn btn-primary">Filtrar</button>
{{Detalhamento_horas_gns}}

                           </form>
						   
<!-- ChartDemands  -->
								<div class="col-md-12 col-sm-12 col-xs-12">
									</br>
									<div class="x_panel">
										<div class="x_title">
											<h2>Demandas | RDM's</h2>
											<ul class="nav navbar-right panel_toolbox">
												<li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a></li>
												<li><a class="close-link"><i class="fa fa-close"></i></a></li>
											</ul>
											<div class="clearfix"></div>
										</div>
										<div class="x_content">
											<div id="mainb2" style="height:350px;"></div>
										</div>
									</div>
								</div>
								<!-- End Chart Demands -->
						   
                        </div>
                     </div>
                  </div>
               </div>

               <!-- end project list -->
            </div>
         </div>		 
      </div>
      <!-- /page content -->
      <!-- footer content -->
      {% include "sarg/include/footer.html" %}
      <!-- /footer content -->
      </div>
      </div>
      <!-- scripts content -->
      {% include "sarg/include/scripts.html" %}
      <!-- /scripts content -->



    <script>
      var theme = {
          color: [
              '#26B99A', '#34495E', '#99cc00', '#3498DB',
              '#9B59B6', '#8abb6f', '#759c6a', '#bfd3b7'
          ],

          title: {
              itemGap: 8,
              textStyle: {
                  fontWeight: 'normal',
                  color: '#408829'
              }
          },

          dataRange: {
              color: ['#1f610a', '#97b58d']
          },

          toolbox: {
              color: ['#408829', '#408829', '#408829', '#408829']
          },

          tooltip: {
              backgroundColor: 'rgba(0,0,0,0.5)',
              axisPointer: {
                  type: 'line',
                  lineStyle: {
                      color: '#408829',
                      type: 'dashed'
                  },
                  crossStyle: {
                      color: '#408829'
                  },
                  shadowStyle: {
                      color: 'rgba(200,200,200,0.3)'
                  }
              }
          },

          dataZoom: {
              dataBackgroundColor: '#eee',
              fillerColor: 'rgba(64,136,41,0.2)',
              handleColor: '#408829'
          },
          grid: {
              borderWidth: 0
          },

          categoryAxis: {
              axisLine: {
                  lineStyle: {
                      color: '#408829'
                  }
              },
              splitLine: {
                  lineStyle: {
                      color: ['#eee']
                  }
              }
          },

          valueAxis: {
              axisLine: {
                  lineStyle: {
                      color: '#408829'
                  }
              },
              splitArea: {
                  show: true,
                  areaStyle: {
                      color: ['rgba(250,250,250,0.1)', 'rgba(200,200,200,0.1)']
                  }
              },
              splitLine: {
                  lineStyle: {
                      color: ['#eee']
                  }
              }
          },
          timeline: {
              lineStyle: {
                  color: '#408829'
              },
              controlStyle: {
                  normal: {color: '#408829'},
                  emphasis: {color: '#408829'}
              }
          },

          k: {
              itemStyle: {
                  normal: {
                      color: '#68a54a',
                      color0: '#a9cba2',
                      lineStyle: {
                          width: 1,
                          color: '#408829',
                          color0: '#86b379'
                      }
                  }
              }
          },
          map: {
              itemStyle: {
                  normal: {
                      areaStyle: {
                          color: '#ddd'
                      },
                      label: {
                          textStyle: {
                              color: '#c12e34'
                          }
                      }
                  },
                  emphasis: {
                      areaStyle: {
                          color: '#99d2dd'
                      },
                      label: {
                          textStyle: {
                              color: '#c12e34'
                          }
                      }
                  }
              }
          },
          force: {
              itemStyle: {
                  normal: {
                      linkStyle: {
                          strokeColor: '#408829'
                      }
                  }
              }
          },
          chord: {
              padding: 4,
              itemStyle: {
                  normal: {
                      lineStyle: {
                          width: 1,
                          color: 'rgba(128, 128, 128, 0.5)'
                      },
                      chordStyle: {
                          lineStyle: {
                              width: 1,
                              color: 'rgba(128, 128, 128, 0.5)'
                          }
                      }
                  },
                  emphasis: {
                      lineStyle: {
                          width: 1,
                          color: 'rgba(128, 128, 128, 0.5)'
                      },
                      chordStyle: {
                          lineStyle: {
                              width: 1,
                              color: 'rgba(128, 128, 128, 0.5)'
                          }
                      }
                  }
              }
          },
          gauge: {
              startAngle: 225,
              endAngle: -45,
              axisLine: {
                  show: true,
                  lineStyle: {
                      color: [[0.2, '#86b379'], [0.8, '#68a54a'], [1, '#408829']],
                      width: 8
                  }
              },
              axisTick: {
                  splitNumber: 10,
                  length: 12,
                  lineStyle: {
                      color: 'auto'
                  }
              },
              axisLabel: {
                  textStyle: {
                      color: 'auto'
                  }
              },
              splitLine: {
                  length: 18,
                  lineStyle: {
                      color: 'auto'
                  }
              },
              pointer: {
                  length: '90%',
                  color: 'auto'
              },
              title: {
                  textStyle: {
                      color: '#333'
                  }
              },
              detail: {
                  textStyle: {
                      color: 'auto'
                  }
              }
          },
          textStyle: {
              fontFamily: 'Arial, Verdana, sans-serif'
          }
      };

      var echartBar = echarts.init(document.getElementById('mainb2'), theme);

echartBar.setOption({
  title: {
    text: 'Detalhamentos horas rateadas (Cliente x Servico x Tipo rateio)',
    subtext: ''
  },
  tooltip: {
    trigger: 'axis'
  },
  legend: {
    data: [{% for value in Detalhamento_horas_gns%}'{{ value.descricao}}'{% endfor %}]
  },
  toolbox: {
    show: false
  },
  calculable: false,
  xAxis: [{
    type: 'category',
    data: [{% for value in Detalhamento_horas_gns%}'{{ value.periodo}}'{% endfor %}]
  }],
  yAxis: [{
    type: 'value'
  }],
  series: [{
    name: 'Demandas',
    type: 'bar',
    data: [{% for value in Detalhamento_horas_gns%}'{{ value.qtd_horas}}'{% endfor %}],
    markPoint: {
      data: [{
        type: 'max',
        name: 'Quantidade'
      }, {
        type: 'min',
        name: 'Quantidade'
      }]
    },
    markLine: {
      data: [{
        type: 'average',
        name: 'Quantidade'
      }]
    }
  }]
});
    </script>
   </body>
</html>